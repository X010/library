<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>用户管理</title>
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/ionicons.min.css">
    <link rel="stylesheet" href="/css/AdminLTE.min.css">
    <link rel="stylesheet" href="/css/skins/skin-purple.min.css">
    <link rel="stylesheet" href="/js/plugins/datepicker/datepicker3.css">
    <link rel="stylesheet" href="/js/plugins/daterangepicker/daterangepicker-bs3.css">
    <link rel="stylesheet" href="/js/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">
    <!-- iCheck for checkboxes and radio inputs -->
    <link rel="stylesheet" href="/js/plugins/iCheck/all.css">
    <!-- Bootstrap Color Picker -->
    <link rel="stylesheet" href="/js/plugins/colorpicker/bootstrap-colorpicker.min.css">
    <!-- Bootstrap time Picker -->
    <link rel="stylesheet" href="/js/plugins/timepicker/bootstrap-timepicker.min.css">
    <link rel="stylesheet" href="/css/admin.css">
    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.inputmask.bundle.min.js"></script>
    <script src="/js/jquery-migrate-1.2.1.min.js"></script>
    <script src="/js/plugins/datepicker/bootstrap-datepicker.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/jquery.easyui.min.1.2.2.js"></script>
    <script src="/js/admintle.min.js"></script>
    <script src="/js/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
    <script src="/js/ckeditor.js"></script>
    <script src="/js/jquery.validate.js"></script>
</head>
<body>
<div class="content">
    <section class="content-header">
        <h1>
            图书管理
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i>图书</a></li>
            <li class="active">新建/修改</li>
        </ol>
    </section>

    <section class="content">
        <div class="row">
            <div class="col-xs-12">
                <!-- Horizontal Form -->
                <div class="box box-info">
                    <div class="box-header with-border">
                        <h3 class="box-title">信息输入<span style="font-size: 12px;"></span></h3>
                    </div>
                    <!-- /.box-header -->
                    <!-- form start -->
                    <form method="post" id="bookForm"  <#if book??> action="/book/modifyBook.action"  <#else> action="/book/addBook.action" </#if> enctype="multipart/form-data" class="form-horizontal">
                        <#if book??>
                            <input type="hidden" id="id" name="id" value="${book.id}"/>
                        </#if>
                        <div class="box-body">
                            <div class="form-group">
                                <label for="name" class="col-sm-2 control-label">书名</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control" <#if book??><#if book.name??> value="${book.name}"</#if></#if> id="name" name="name" placeholder="书名">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="author" class="col-sm-2 control-label">作者</label>

                                <div class="col-sm-10">
                                    <input type="text" class="form-control"  <#if book??><#if book.author??> value="${book.author}"</#if></#if> name="author" id="author" placeholder="作者">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="code" class="col-sm-2 control-label">条码</label>

                                <div class="col-sm-10">
                                    <input type="text" class="form-control" <#if book??><#if book.isbn??> value="${book.isbn}"</#if></#if> style="width: 300px;" name="code" id="code" placeholder="条码">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="ctype" class="col-sm-2 control-label">上架分类</label>

                                <div class="col-sm-10">
                                    <input type="text" <#if book??><#if book.release_type??> value="${book.release_type}"</#if></#if> class="form-control" style="width: 300px;" name="ctype" id="ctype" placeholder="上架分类">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="time" class="col-sm-2 control-label">出版时间</label>
                                <div class="col-sm-10">
                                    <div class="input-group">
                                        <div class="input-group-addon">
                                            <i class="fa fa-calendar"></i>
                                        </div>
                                        <input type="text" class="form-control" <#if book??><#if book.release_time??> value="${book.release_time?string("dd/MM/yyyy")}"</#if></#if> name="time" style="width: 200px;" id="time"
                                               data-inputmask="'alias': 'dd/mm/yyyy'"
                                               data-mask>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="price" class="col-sm-2 control-label">定价(元)</label>

                                <div class="col-sm-10">
                                    <input type="text" style="width: 100px;" class="form-control" <#if book??> <#if book.price??>value="${book.price}"</#if></#if> name="price" id="price" placeholder="定价(元)">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="keyword" class="col-sm-2 control-label">推荐词</label>

                                <div class="col-sm-10">
                                    <input type="text" class="form-control" name="keyword" id="keyword" <#if book??><#if book.recomment_word??> value="${book.recomment_word}"</#if></#if>  placeholder="推荐词">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="authorDesc" class="col-sm-2 control-label">作者介绍</label>

                                <div class="col-sm-10">
                                      <textarea class="textarea" id="authorDesc" name="authorDesc" placeholder="请输入作者介绍"
                                                style="width: 100%; height: 200px; font-size: 14px; line-height: 18px; border: 1px solid #dddddd; padding: 10px;"><#if book??><#if book.author_describe??>${book.author_describe}</#if></#if></textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="num" class="col-sm-2 control-label">库存/印数</label>

                                <div class="col-sm-10">
                                    <input type="text" class="form-control" <#if book??><#if book.book_size??> value="${book.book_size}"</#if></#if> style="width: 200px;" name="num" id="num" placeholder="库存/印数">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="cover" class="col-sm-2 control-label">封面</label>

                                <div class="col-sm-10">
                                    <input type="file" class="form-control" name="cover" id="cover" placeholder="封面">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="desc" class="col-sm-2 control-label">描述</label>

                                <div class="col-sm-10">
                                    <textarea class="textarea" id="desc" name="desc" placeholder="请填写书的描述信息"
                                              style="width: 100%; height: 200px; font-size: 14px; line-height: 18px; border: 1px solid #dddddd; padding: 10px;"><#if book??><#if book.book_describe??>${book.book_describe}</#if></#if></textarea>
                                </div>
                            </div>
                            <div id="params">
                            </div>
                        </div>
                        <!-- /.box-body -->
                        <div class="box-footer">
                            <button type="button" onclick="window.location.href='/book_m.action';" class="btn btn-default">返回</button>
                            <button type="submit" class="btn btn-info pull-right">保存</button>
                        </div>
                        <!-- /.box-footer -->
                    </form>
                </div>
            </div>
        </div>
    </section>
</div>

<script language="JavaScript">
    $(function () {
        $("#time").inputmask("dd/mm/yyyy", {"placeholder": "dd/mm/yyyy"});


        $("#bookForm").validate({
            rules: {
                name: {
                    required: true,
                    minlength: 1,
                    maxlength: 40
                },
                author: {
                    required: true,
                    minlength: 2,
                    maxlength: 20
                },
                code: {
                    required: true,
                    minlength: 2,
                    maxlength: 20
                },
                ctype: {
                    required: true,
                    minlength: 2,
                    maxlength: 20
                },
                time: {
                    required: true,
                    minlength: 2,
                    maxlength: 20
                },
                price: {
                    required: true,
                    minlength: 2,
                    maxlength: 20
                },
                keyword: {
                    required: true,
                    minlength: 2,
                    maxlength: 20
                },
                authorDesc: {
                    required: true,
                    minlength: 2,
                    maxlength: 1024
                },
                num: {
                    required: true,
                    minlength: 1,
                    maxlength: 20
                },
                desc: {
                    required: true,
                    minlength: 2,
                    maxlength: 1024
                }
            },
            messages: {
                name: {
                    required: "请输入书名",
                    minlength: "书名最少需要1个字",
                    maxlength: "书名最多不超过40个字"
                },
                author: {
                    required: "请输入作者",
                    minlength: "作者最少需要2个字",
                    maxlength: "作者最多不超过20个字"
                },
                code: {
                    required: "请输入条码",
                    minlength: "条码最少需要2个字",
                    maxlength: "条码最多不超过20个字"
                },
                ctype: {
                    required: "请输入上架分类",
                    minlength: "上架分类最少需要2个字",
                    maxlength: "上架分类最多不超过20个字"
                },
                time: {
                    required: "请输入出版时间",
                    minlength: "出版时间最少需要2个字",
                    maxlength: "出版时间最多不超过20个字"
                },
                price: {
                    required: "请输入价格",
                    minlength: "价格最少需要2个字",
                    maxlength: "价格最多不超过20个字"
                }, keyword: {
                    required: "请输入用推荐词",
                    minlength: "推荐词最少需要2个字",
                    maxlength: "推荐词最多不超过20个字"
                },
                authorDesc: {
                    required: "请输入作者介绍",
                    minlength: "作者介绍最少需要2个字",
                    maxlength: "作者介绍最多不超过20个字"
                }, num: {
                    required: "请输入库存量",
                    minlength: "库存量名最少需要1个字",
                    maxlength: "库存量最多不超过1024个字"
                },
                desc: {
                    required: "请输入描述信息",
                    minlength: "描述信息最少需要2个字",
                    maxlength: "描述信息最多不超过1024个字"
                }
            },
            submitHandler: function () {
                return true;
            }
        });
    })
</script>
</body>
</html>